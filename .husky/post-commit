echo "\033[1;32m Rebasing against origin/main... \033[0m"

isStashed=false

if ! git diff-index --quiet HEAD --; then
    git stash push

    isStashed=true
fi

git fetch origin main
git rebase origin/main

if [ "$isStashed" = true ]; then
    git stash pop
fi

echo "\033[1;32m Post-commit checks passed. \033[0m"
